{"version":3,"file":"metrics-logger.js","sources":["../../src/utils/metrics-logger.js"],"names":["define","MetricsLogger","options","self","this","userId","window","bootstrapped","user","id","consoleLogger","_init","LoggingCache","ALL","LOG","DEBUG","INFO","WARN","ERROR","METRIC","NONE","defaultOptions","logLevel","consoleLevel","defaultNamespace","consoleNamespaceWhitelist","clientPrefix","maxCacheSize","postSize","addTime","cacheKeyPrefix","postUrl","delayPostInMs","getPingData","undefined","onServerResponse","prototype","k","hasOwnProperty","_parseLevel","_sending","_waiting","_postSize","_initCache","cache","maxSize","key","err","_emitToConsole","level","type","upper","toUpperCase","Error","emit","namespace","logArguments","_addToCache","arguments","length","newLength","add","_buildEntry","_postCache","entry","args","time","Date","toISOString","jQuery","when","count","entries","get","entriesLength","postData","metrics","JSON","stringify","post","always","fail","xhr","readyState","status","responseJSON","responseText","done","response","remove","_delayPost","setTimeout","whitelist","indexOf","Array","slice","call","unshift","info","apply","error","warn","debug","log","metric","_hasStorage","_initStorage","test","localStorage","setItem","removeItem","e","getItem","empty","_cache","_fetchAndParse","overage","splice","push","_unparseAndStore","parse","removed","print","console"],"mappings":"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"}