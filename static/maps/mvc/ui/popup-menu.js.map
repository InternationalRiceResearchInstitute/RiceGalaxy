{"version":3,"file":"popup-menu.js","sources":["../../../src/mvc/ui/popup-menu.js"],"names":["define","PopupMenu","Backbone","View","extend","initialize","$button","options","this","length","$","data","menu","click","event","remove","_renderAndShow","clickEvent","render","$el","appendTo","css","_getShownPosition","show","_setUpCloseBehavior","addClass","hide","position","html","template","attr","find","each","i","option","func","children","call","preventDefault","id","_templateOptions","join","_","map","divider","header","href","target","check","menuWidth","width","x","pageX","Math","min","document","scrollLeft","window","max","top","pageY","left","closePopup","off","parent","err","contents","one","addItem","item","index","splice","removeItem","findIndexByHtml","has","findItemByHtml","toString","create","make_popupmenu","button_element","initial_options","convertedOptions","optionVal","optionKey","newOption","jQuery","type","push","convertLinksToOptions","$parent","selector","elem","$link","text","linkHref","linkTarget","confirmText","confirm","location","fromExistingDom","$buttonElement","$menuElement","menuElementLinkSelector","make_popup_menus","menuSelector","buttonSelectorBuildFn","popupMenusCreated","fromDom"],"mappings":"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"}