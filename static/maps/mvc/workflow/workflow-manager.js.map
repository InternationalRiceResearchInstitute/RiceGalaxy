{"version":3,"file":"workflow-manager.js","sources":["../../../src/mvc/workflow/workflow-manager.js"],"names":["define","Connector","Toastr","Workflow","app","canvas_container","this","id_counter","nodes","name","has_changes","active_form_has_changes","workflowOutputLabels","$","extend","prototype","canLabelOutputWith","label","registerOutputLabel","unregisterOutputLabel","updateOutputLabel","fromLabel","toLabel","warning","attemptUpdateOutputLabel","node","outputName","labelWorkflowOutput","nodeView","redrawWorkflowOutputs","create_node","type","title_text","content_id","prebuildNode","add_node","fit_canvas_to_nodes","canvas_manager","draw_overview","activate_node","id","element","attr","workflow","remove_node","active_node","clear_active_node","remove_all","wf","each","k","v","destroy","rectify_workflow_outputs","using_workflow_outputs","has_existing_pjas","workflow_outputs","length","post_job_actions","pja_id","pja","action_type","self","node_changed","pjas_to_rem","push","i","pja_name","output_terminals","ot_id","ot","create_pja","isWorkflowOutput","output_name","action_arguments","reload_active_node","to_simple","input_connections","input_terminals","t","cons","connectors","c","handle1","con_dict","input_subworkflow_step_id","attributes","input","undefined","act","node_data","tool_version","config_form","version","tool_state","errors","position","annotation","uuid","steps","from_simple","data","initialImport_","initialImport","offset","Object","keys","max_id","step","workflow_output","init_field_data","css","top","left","parseInt","Math","max","isArray","l","x","other_node","connect","redraw","addWorkflowOutput","callout","find","Galaxy","root","check_changes_in_active_form","submit","make_inactive","showAttributes","showForm","make_active","force","showWorkflowParameters","layout","n_pred","successors","j","other","node_ids_by_level","level_parents","pred_k","sk","all_nodes","h_pad","v_pad","ids","sort","a","b","max_width","width","height","_","bounds_for_all_nodes","p","xmin","xmax","ymin","ymax","e","min","round_up","n","ceil","fix_delta","new_pos","bounds","parent","xmin_delta","ymin_delta","children"],"mappings":"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"}