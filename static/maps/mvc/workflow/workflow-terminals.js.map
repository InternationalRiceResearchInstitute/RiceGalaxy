{"version":3,"file":"workflow-terminals.js","sources":["../../../src/mvc/workflow/workflow-terminals.js"],"names":["define","Globals","CollectionTypeDescription","collectionType","this","isCollection","rank","split","length","NULL_COLLECTION_TYPE_DESCRIPTION","canMatch","canMapOver","toString","append","otherCollectionType","equal","other","ANY_COLLECTION_TYPE_DESCRIPTION","$","extend","prototype","otherCollectionTypeDescription","requiredSuffix","_endsWith","effectiveMapOver","effectiveCollectionType","substring","str","suffix","indexOf","TerminalMapping","Backbone","Model","initialize","attr","mapOver","terminal","terminalMapping","disableMapOver","setMapOver","collectionTypeDescription","trigger","Terminal","element","connectors","connect","connector","push","node","markChanged","disconnect","splice","inArray","resetMappingIfNeeded","redraw","each","_","c","destroy","slice","destroyInvalidConnections","destroyIfInvalid","val","multiple","output_terminals","outputTerminal","isMappedOver","resetMapping","OutputTerminal","call","datatypes","hasConnectedOutputTerminals","hasConnectedMappedInputTerminals","mappedInputTerminals","mappedInput","noMappedInputs","hasMappedOverInputTerminals","connectedInput","handle2","BaseInputTerminal","update","input","canAccept","_inputFilled","attachable","reset","connected","inputFilled","_collectionAttached","inputsFilled","firstOutput","handle1","_mappingConstraints","constraints","first","values","connectedMappedInputTerminals","inputTerminal","_producesAcceptableDatatype","t","thisDatatype","cat_outputs","Array","concat","post_job_actions","pja_i","pja","action_type","output_name","name","action_arguments","other_datatype_i","other_datatype","app","isSubType","_otherCollectionType","otherMapOver","InputTerminal","extensions","collection","other_output","thisMapOver","mappingConstraints","every","bind","InputCollectionTerminal","collectionTypes","collection_types","_effectiveMapOver","some","collectionTypeIndex","_effectiveCollectionTypes","map","effectiveCollectionTypes","OutputCollectionTerminal","collection_type","collectionTypeSource","collection_type_source","console","log","output","newCollectionType"],"mappings":"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"}