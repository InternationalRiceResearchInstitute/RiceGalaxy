{"version":3,"file":"tools.js","sources":["../../../src/mvc/tool/tools.js"],"names":["define","_","util","data","VisibilityMixin","hidden","show","this","set","hide","toggle","get","is_visible","attributes","ToolParameter","Backbone","Model","extend","defaults","name","label","type","value","html","num_samples","initialize","unescape","copy","toJSON","set_value","ToolParameterCollection","Collection","model","DataToolParameter","IntegerToolParameter","parseInt","get_samples","d3","scale","linear","domain","ticks","FloatToolParameter","parseFloat","SelectToolParameter","map","option","subModelTypes","integer","float","select","Tool","id","description","target","inputs","outputs","urlRoot","Galaxy","root","options","p","p_class","rval","prototype","call","i","remove_inputs","types","tool","incompatible_inputs","filter","input","indexOf","remove","only_samplable_inputs","valid_inputs","each","push","apply_search_results","results","set_input_value","find","set_input_values","inputs_dict","self","keys","input_name","run","_run","rerun","target_dataset","regions","action","target_dataset_id","get_inputs_dict","input_dict","additional_params","payload","tool_id","run_deferred","$","Deferred","ss_deferred","ServerStateDeferred","ajax_settings","url","JSON","stringify","dataType","contentType","interval","success_fn","response","when","go","then","result","resolve","DatasetCollection","ToolCollection","View","ToolSectionLabel","ToolSection","elems","open","clear_search_results","elt","cur_label","all_hidden","ToolSearch","search_hint_string","min_chars_for_search","clear_btn_url","visible","query","clear_key","on","do_search","length","q","timer","clearTimeout","setTimeout","ga","clear_search","ToolPanel","tool_search","tools","layout","parse","parse_elt","elt_dict","model_class","panel_elt","BaseView","update_visible","$el","ToolLinkView","tagName","render","$link","append","templates","tool_link","formStyle","e","preventDefault","upload","router","version","ToolSectionLabelView","className","text","ToolSectionView","update_open","panel_section","section_body","tool_view","label_view","events","click .toolSectionTitle > a","children","slideDown","slideUp","ToolSearchView","click","keyup :input","change :input","click #search-clear-btn","is","css","tooltip","focus_and_select","focus","clear","val","query_changed","evData","which","ToolPanelView","handle_search_results","search_view","section_title_view","attr","split","trigger","ToolFormView","tool_form","tool_panel_view","collection","tool_form_view","show_tool","fetch","done","width","template","join","variable"],"mappings":"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"}