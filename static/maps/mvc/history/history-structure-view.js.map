{"version":3,"file":"history-structure-view.js","sources":["../../../src/mvc/history/history-structure-view.js"],"names":["define","JobDAG","JOB","JOB_LI","DATASET_LI","BASE_MVC","logNamespace","window","HistoryStructureComponent","Backbone","View","extend","LoggableMixin","_logNamespace","className","_INITIAL_ZOOM_LEVEL","_MIN_ZOOM_LEVEL","_LINK_ID_SEP","_VERTEX_NAME_DATA_KEY","JobItemClass","JobListItemView","ContentItemClass","DatasetListItemView","initialize","attributes","this","log","component","_liMap","_createVertexItems","zoomLevel","layout","_createLayout","layoutOptions","view","eachVertex","vertex","li","type","data","job","_createJobListItem","_createContentListItem","name","debug","jobData","Job","outputModels","_","map","get","output","model","contents","type_id","outputCollection","reset","historyId","id","tool","listenTo","renderGraph","foldout","content","layoutDefaults","linkSpacing","linkWidth","linkHeight","jobWidth","jobHeight","jobSpacing","linkAdjX","linkAdjY","options","defaults","clone","vertices","values","nodeMap","links","svg","width","height","forEach","v","node","x","y","edges","e","link","source","target","push","render","$el","html","join","$graph","appendTo","$","_render","_updateLayout","css","renderSVG","position","top","left","is","delay","size","each","Math","max","x1","y1","x2","y2","JSON","stringify","highlightConnect","d","d3","select","classed","addClass","unhighlightConnect","removeClass","empty","append","attr","connections","selectAll","enter","on","_connectionPath","CURVE_X","controlY","events","mouseover .graph > .list-item","ev","highlightConnected","currentTarget","mouseout  .graph > .list-item","jobElement","highlight","undefined","jobClassFn","jQuery","prototype","connectionClass","$hoverTarget","call","edge","ancestorId","ancestorLi","eachEdge","descendantId","descendantLi","zoom","level","min","toString","VerticalHistoryStructureComponent","nodeId","CURVE_Y","controlX","HistoryStructureView","_layoutToComponentClass","horizontal","vertical","_DEFAULT_LAYOUT","contains","keys","_processTools","tools","_processJobs","jobs","_createDAG","dag","historyContents","toJSON","excludeSetMetadata","excludeErroredJobs","_createComponents","structure","componentViews","weakComponentGraphArray","componentGraph","_createComponent","ComponentClass","$components","changeLayout","Error"],"mappings":"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"}