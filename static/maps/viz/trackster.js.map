{"version":3,"file":"trackster.js","sources":["../../src/viz/trackster.js"],"names":["ui","view","browser_router","require","mod_utils","cssLoadFile","define","_","tracks","visualization","mod_icon_btn","query_string","GridView","Base","this","initialize","apply","arguments","extend","Backbone","Model","TracksterUI","baseURL","save_viz","Galaxy","modal","show","title","body","bookmarks","$","each","push","position","children","text","annotation","overview_track_name","overview_drawable","config","get_value","viz_config","to_dict","viewport","chrom","start","low","end","high","overview","ajax","url","root","type","dataType","data","id","vis_id","dbkey","vis_json","JSON","stringify","success","vis_info","hide","has_changes","window","history","pushState","location","hash","error","buttons","Cancel","createButtonMenu","self","menu","create_icon_buttons_menu","icon_class","on_click","select_datasets","new_tracks","track","add_drawable","object_from_template","DrawableGroup","name","force_right_panel","css","handle_unsaved_changes","tooltip_config","placement","buttonMenu","add_bookmark","editable","bookmarks_container","new_bookmark","addClass","appendTo","position_div","annotation_div","click","go_to","delete_icon_container","prependTo","slideUp","remove","make_text_editable","num_rows","use_textarea","help_text","create_visualization","view_config","viewport_config","drawables_config","bookmarks_config","TracksterView","header","editor","when","load_chroms_deferred","then","chrom_info","overview_drawable_name","undefined","change_chrom","i","length","drawables","set_overview","bookmark","set_up_router","options","TrackBrowserRouter","init_keyboard_nav","document","keyup","e","srcElement","is","which","move_fraction","Math","round","viewport_container","height","scrollTop","Leave without Saving","off","Save","View","$el","attr","append","resize_window","galaxy_config","app","view_existing","get","choose_existing_or_new","view_new","listTracksParams","dataset_params","dataset_id","hda_ldda","gene_region","View in saved visualization","view_in_saved","View in new visualization","tracks_grid","url_base","dict_format","embedded","Add to visualization","parent","find","val","param","container","init_editor","alert","response","template_view_new","Create","create_browser","dbkeys_in_genomes","map","r","default_dbkey","contains","focus","select2","html","trigger","add_dataset","data_type","track_data","on","GalaxyApp"],"mappings":"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"}