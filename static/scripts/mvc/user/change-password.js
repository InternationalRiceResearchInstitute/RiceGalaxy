define(["mvc/user/manage-user-information"],function(a){var b=Backbone.View.extend({initialize:function(a){this.render(a)},renderMessage:function(a,b){return'<div class="'+(""===b?"done":b)+"message"+("error"===b?" validate":"")+'">'+a+"</div>"},render:function(b){var c="",d=this;$(".user-pref").css("display","none"),$(".change-password-section").remove(),a.ManageUserInformation.prototype.hideErrorDoneMessage(),b.status&&(c=d.renderMessage(b.message,b.status)),c+='<div class="change-password-section"> <h2>Change Password</h2>',c+='<ul class="manage-table-actions"><li><a class="action-button back-user-pref" target="galaxy_main">User preferences</a></li></ul>',c=c+'<div class="toolForm"><form name="change_password" id="change_password"><input type="hidden" name="display_top" value="'+b.display_top+'"/><div class="toolFormTitle">Change Password</div>',b.token?c=c+'<input type="hidden" name="token" value="'+b.token+'"/>':c+='<div class="form-row"><label>Current password:</label><input type="password" name="current" value="" size="40"/></div>',c+='<div class="form-row"><label>New password:</label><input type="password" name="password" value="" size="40"/></div><div class="form-row"><label>Confirm:</label><input type="password" name="confirm" value="" size="40"/></div><div class="form-row"><input type="button" class="save-password action-button" name="change_password_button" value="Save"/></div></form></div>',c+="</div>",$(".user-preferences-all").append(c),$(".save-password").on("click",function(a){d.savePassword(d,a)}),$(".back-user-pref").on("click",function(){$(".change-password-section").remove(),a.ManageUserInformation.prototype.hideErrorDoneMessage(),$(".user-pref").show()})},savePassword:function(){var b=Galaxy.root+"api/user_preferences/change_password",c=$("input[name='current']").val(),d=$("input[name='password']").val(),e=$("input[name='confirm']").val(),f={},g=a.ManageUserInformation.prototype;f={change_password_button:!0,password:d,current:c,confirm:e,token:""},$.getJSON(b,f,function(a){"error"===a.status?g.renderError(a.message):($(".change-password-section").remove(),g.renderDone(a.message),$(".user-pref").show())})}});return{ChangePassword:b}});
//# sourceMappingURL=../../../maps/mvc/user/change-password.js.map