define(["utils/utils","mvc/grid/grid-view","mvc/history/history-model","mvc/history/copy-dialog"],function(a,b,c,d){var e=Backbone.View.extend({title:"Histories",initialize:function(b){var c=this;this.setElement($("<div/>")),this.model=new Backbone.Model,a.get({url:Galaxy.root+"history/"+b.action_id,success:function(a){a.dict_format=!0,_.each(a.operations,function(a){"Copy"==a.label&&(a.onclick=function(a){c._showCopyDialog(a)})}),c.model.set(a),c.render()}})},render:function(){var a=new b(this.model.attributes);this.$el.empty().append(a.$el)},_showCopyDialog:function(a){var b=new c.History({id:a});b.fetch().fail(function(){alert("History could not be fetched. Please contact an administrator")}).done(function(){d(b,{}).done(function(){window.parent&&window.parent.Galaxy&&window.parent.Galaxy.currHistoryPanel&&window.parent.Galaxy.currHistoryPanel.loadCurrentHistory(),window.location.reload(!0)})})}});return{View:e}});
//# sourceMappingURL=../../../maps/mvc/history/history-list.js.map