define(["utils/utils","mvc/ui/ui-misc"],function(a,b){var c=Backbone.View.extend({visible:!1,initialize:function(c){var d=this;this.model=c&&c.model||new Backbone.Model({id:a.uid(),cls:"ui-portlet",title:"",icon:"",buttons:null,body:null,scrollable:!0,nopadding:!1,operations:null,collapsible:!1,collapsible_button:!1,collapsed:!1,onchange_title:null}).set(c),this.setElement(this._template()),this.$body=this.$(".portlet-body"),this.$title_text=this.$(".portlet-title-text"),this.$title_icon=this.$(".portlet-title-icon"),this.$header=this.$(".portlet-header"),this.$content=this.$(".portlet-content"),this.$backdrop=this.$(".portlet-backdrop"),this.$buttons=this.$(".portlet-buttons"),this.$operations=this.$(".portlet-operations"),this.model.get("body")&&this.append(this.model.get("body")),this.collapsible_button=new b.ButtonIcon({icon:"fa-eye",tooltip:"Collapse/Expand",cls:"ui-button-icon-plain",onclick:function(){d[d.collapsed?"expand":"collapse"]()}}),this.render()},render:function(){var a=this,b=this.model.attributes;return this.$el.removeClass().addClass(b.cls).attr("id",b.id),this.$header[b.title?"show":"hide"](),this.$title_text.html(b.title),_.each([this.$content,this.$body],function(a){a[b.nopadding?"addClass":"removeClass"]("no-padding")}),b.icon?this.$title_icon.removeClass().addClass("portlet-title-icon fa").addClass(b.icon).show():this.$title_icon.hide(),this.$title_text[b.collapsible?"addClass":"removeClass"]("no-highlight collapsible").off(),b.collapsible&&(this.$title_text.on("click",function(){a[a.collapsed?"expand":"collapse"]()}),b.collapsed?this.collapse():this.expand()),this.$title_text.prop("disabled",!b.onchange_title),b.onchange_title&&this.$title_text.make_text_editable({on_finish:function(a){b.onchange_title(a)}}),b.buttons?(this.$buttons.empty().show(),$.each(this.model.get("buttons"),function(b,c){c.$el.prop("id",b),a.$buttons.append(c.$el)})):this.$buttons.hide(),this.$operations.empty,b.collapsible_button&&this.$operations.append(this.collapsible_button.$el),b.operations&&$.each(b.operations,function(b,c){c.$el.prop("id",b),a.$operations.append(c.$el)}),this},append:function(a){this.$body.append(a)},empty:function(){this.$body.empty()},header:function(){return this.$header},body:function(){return this.$body},show:function(){this.visible=!0,this.$el.fadeIn("fast")},hide:function(){this.visible=!1,this.$el.hide()},enableButton:function(a){this.$buttons.find("#"+a).prop("disabled",!1)},disableButton:function(a){this.$buttons.find("#"+a).prop("disabled",!0)},hideOperation:function(a){this.$operations.find("#"+a).hide()},showOperation:function(a){this.$operations.find("#"+a).show()},setOperation:function(a,b){this.$operations.find("#"+a).off("click").on("click",b)},title:function(a){return a&&this.$title_text.html(a),this.$title_text.html()},collapse:function(){this.collapsed=!0,this.$content.height("0%"),this.$body.hide(),this.collapsible_button.setIcon("fa-eye-slash")},expand:function(){this.collapsed=!1,this.$content.height("100%"),this.$body.fadeIn("fast"),this.collapsible_button.setIcon("fa-eye")},disable:function(){this.$backdrop.show()},enable:function(){this.$backdrop.hide()},_template:function(){return $("<div/>").append($("<div/>").addClass("portlet-header").append($("<div/>").addClass("portlet-operations")).append($("<div/>").addClass("portlet-title").append($("<i/>").addClass("portlet-title-icon")).append($("<span/>").addClass("portlet-title-text")))).append($("<div/>").addClass("portlet-content").append($("<div/>").addClass("portlet-body")).append($("<div/>").addClass("portlet-buttons"))).append($("<div/>").addClass("portlet-backdrop"))}});return{View:c}});
//# sourceMappingURL=../../../maps/mvc/ui/ui-portlet.js.map