define(["utils/utils"],function(a){var b=Backbone.View.extend({initialize:function(b){var c=this;this.model=b&&b.model||new Backbone.Model({id:a.uid(),min:null,max:null,step:null,precise:!1,split:1e4,value:null,onchange:function(){}}).set(b),this.setElement(this._template()),this.$el.attr("id",this.model.id),this.$text=this.$(".ui-form-slider-text"),this.$slider=this.$(".ui-form-slider-element");var d=[];this.$text.on("change",function(){c.value($(this).val())}).on("keyup",function(a){d[a.which]=!1}).on("keydown",function(a){var b=a.which;d[b]=!0,c.model.get("is_workflow")&&d[16]&&52==b?(c.value("$"),event.preventDefault()):8==b||9==b||13==b||37==b||39==b||b>=48&&57>=b&&!d[16]||b>=96&&105>=b||(190==b||110==b)&&-1==$(this).val().indexOf(".")&&c.model.get("precise")||(189==b||109==b)&&-1==$(this).val().indexOf("-")||c._isParameter($(this).val())||d[91]||d[17]||event.preventDefault()});var e=this.model.attributes;this.has_slider=null!==e.max&&null!==e.min&&e.max>e.min;var f=e.step;f||(f=e.precise&&this.has_slider?(e.max-e.min)/e.split:1),this.has_slider?(this.$text.addClass("ui-form-slider-left"),this.$slider.slider({min:e.min,max:e.max,step:f}).on("slide",function(a,b){c.value(b.value)})):this.$slider.hide(),this.listenTo(this.model,"change",this.render,this),this.render()},render:function(){var a=this.model.get("value");this.has_slider&&this.$slider.slider("value",a),a!==this.$text.val()&&this.$text.val(a)},value:function(a){var b=this.model.attributes;return void 0!==a&&(null===a||""===a||this._isParameter(a)||(isNaN(a)&&(a=0),!b.precise&&(a=Math.round(a)),null!==b.max&&(a=Math.min(a,b.max)),null!==b.min&&(a=Math.max(a,b.min))),this.model.set("value",a),this.model.trigger("change"),b.onchange(a)),this.model.get("value")},_isParameter:function(a){return this.model.get("is_workflow")&&"$"===String(a).substring(0,1)},_template:function(){return'<div class="ui-form-slider"><input class="ui-form-slider-text" type="text"/><div class="ui-form-slider-element"/></div>'}});return{View:b}});
//# sourceMappingURL=../../../maps/mvc/ui/ui-slider.js.map