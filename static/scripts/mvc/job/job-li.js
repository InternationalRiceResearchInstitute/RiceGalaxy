define(["mvc/list/list-item","mvc/dataset/dataset-list","mvc/base-mvc","utils/localization"],function(a,b,c,d){var e=a.FoldoutListItemView,f=e.extend({className:e.prototype.className+" job",id:function(){return["job",this.model.get("id")].join("-")},foldoutPanelClass:b.DatasetList,initialize:function(a){a.logger&&(this.logger=this.model.logger=a.logger),this.log(this+".initialize:",a),e.prototype.initialize.call(this,a),this.tool=a.tool||{},this.jobData=a.jobData||{},this.linkTarget=a.linkTarget||"_blank"},_swapNewRender:function(a){return e.prototype._swapNewRender.call(this,a),this.model.has("state")&&this.$el.addClass("state-"+this.model.get("state")),this.$el},_getFoldoutPanelOptions:function(){var a=e.prototype._getFoldoutPanelOptions.call(this);return _.extend(a,{collection:this.model.outputCollection,selecting:!1})},_labelParamMap:function(){var a=this.model.get("params"),b={};return _.each(this.tool.inputs,function(c){c.label&&"DataToolParameter"!==c.model_class&&(b[c.label]=a[c.name])}),b},_labelInputMap:function(){var a=this,b={};return _.each(this.jobData.inputs,function(c){var d=a._findToolInput(c.name);d&&(b[d.label]=c)}),b},_findToolInput:function(a){var b=this.tool.inputs,c=_.findWhere(b,{name:a});return c?c:this._findRepeatToolInput(a,b)},_findRepeatToolInput:function(a,b){b=b||this.tool.inputs;var c=_.find(b,function(b){return 0===a.indexOf(b.name)});if(!c)return void 0;var d=_.find(c.inputs,function(b){return-1!==a.indexOf(b.name)});return d},toString:function(){return"JobListItemView("+this.model+")"}});return f.prototype.templates=function(){var a=(c.wrapTemplate(['<div class="list-element">','<div class="id"><%- model.id %></div>','<div class="warnings"></div>','<div class="selector">','<span class="fa fa-2x fa-square-o"></span>',"</div>",'<div class="primary-actions"></div>','<div class="title-bar"></div>','<div class="details"></div>',"</div>"]),c.wrapTemplate(['<div class="title-bar clear" tabindex="0">','<div class="title">','<span class="name"><%- view.tool.name %></span>',"</div>",'<div class="subtitle">','<span class="description"><%- view.tool.description %></span','<span class="create-time">'," ",d("Created"),": <%= new Date( job.create_time ).toString() %>, ","</span","</div>","</div>"],"job")),b=c.wrapTemplate(['<div class="subtitle">','<span class="description"><%- view.tool.description %></span',"</div>"],"job"),f=c.wrapTemplate(['<div class="details">','<div class="params">',"<% _.each( view._labelInputMap(), function( input, label ){ %>",'<div class="input" data-input-name="<%- input.name %>" data-input-id="<%- input.id %>">','<label class="prompt"><%- label %></label>','<span class="value"><%- input.content.name %></span>',"</div>","<% }) %>","<% _.each( view._labelParamMap(), function( param, label ){ %>",'<div class="param" data-input-name="<%- param.name %>">','<label class="prompt"><%- label %></label>','<span class="value"><%- param %></span>',"</div>","<% }) %>","</div>","</div>"],"job");return _.extend({},e.prototype.templates,{titleBar:a,subtitle:b,details:f})}(),{JobListItemView:f}});
//# sourceMappingURL=../../../maps/mvc/job/job-li.js.map