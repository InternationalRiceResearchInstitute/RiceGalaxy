define(["libs/underscore"],function(a){var b=Backbone.View.extend({className:"track-header",initialize:function(){this.model.config.get("name").on("change:value",this.update_name,this),this.render()},render:function(){this.$el.append($("<div/>").addClass(this.model.drag_handle_class)),this.$el.append($("<div/>").addClass("track-name").text(this.model.config.get_value("name"))),this.action_icons={},this.render_action_icons(),this.$el.dblclick(function(a){a.stopPropagation()}),this.$el.append($("<div style='clear: both'/>"))},update_name:function(){this.$el.find(".track-name").text(this.model.config.get_value("name"))},render_action_icons:function(){var b=this;this.icons_div=$("<div/>").addClass("track-icons").hide().appendTo(this.$el),a.each(this.model.action_icons_def,function(a){b.add_action_icon(a.name,a.title,a.css_class,a.on_click_fn,a.prepend,a.hide)}),this.set_display_modes(this.model.display_modes)},add_action_icon:function(a,b,c,d,e,f){var g=this;this.action_icons[a]=$("<a/>").attr("title",b).addClass("icon-button").addClass(c).tooltip().click(function(){d(g.model)}).appendTo(this.icons_div),f&&this.action_icons[a].hide()},set_display_modes:function(a,b){if(a){this.model.display_modes=a,this.model.mode=b||this.model.config.get_value("mode")||this.model.display_modes[0],this.action_icons.mode_icon.attr("title","Set display mode (now: "+this.mode+")");for(var c=this.model,d={},e=0,f=c.display_modes.length;f>e;e++){var g=c.display_modes[e];d[g]=function(a){return function(){c.change_mode(a)}}(g)}make_popupmenu(this.action_icons.mode_icon,d)}}});return{TrackHeaderView:b}});
//# sourceMappingURL=../../maps/viz/viz_views.js.map